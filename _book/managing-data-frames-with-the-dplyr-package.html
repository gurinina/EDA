<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Managing Data Frames with the dplyr package | Exploratory Data Analysis with R</title>
  <meta name="description" content="This book covers the essential exploratory techniques for summarizing data with R. These techniques are typically applied before formal modeling commences and can help inform the development of more complex statistical models. Exploratory techniques are also important for eliminating or sharpening potential hypotheses about the world that can be addressed by the data you have. We will cover in detail the plotting systems in R as well as some of the basic principles of constructing informative data graphics. We will also cover some of the common multivariate statistical techniques used to visualize high-dimensional data." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Managing Data Frames with the dplyr package | Exploratory Data Analysis with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bookdown.org/rdpeng/exdata/" />
  <meta property="og:image" content="https://bookdown.org/rdpeng/exdata/cover_sm.png" />
  <meta property="og:description" content="This book covers the essential exploratory techniques for summarizing data with R. These techniques are typically applied before formal modeling commences and can help inform the development of more complex statistical models. Exploratory techniques are also important for eliminating or sharpening potential hypotheses about the world that can be addressed by the data you have. We will cover in detail the plotting systems in R as well as some of the basic principles of constructing informative data graphics. We will also cover some of the common multivariate statistical techniques used to visualize high-dimensional data." />
  <meta name="github-repo" content="rdpeng/exdata" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Managing Data Frames with the dplyr package | Exploratory Data Analysis with R" />
  
  <meta name="twitter:description" content="This book covers the essential exploratory techniques for summarizing data with R. These techniques are typically applied before formal modeling commences and can help inform the development of more complex statistical models. Exploratory techniques are also important for eliminating or sharpening potential hypotheses about the world that can be addressed by the data you have. We will cover in detail the plotting systems in R as well as some of the basic principles of constructing informative data graphics. We will also cover some of the common multivariate statistical techniques used to visualize high-dimensional data." />
  <meta name="twitter:image" content="https://bookdown.org/rdpeng/exdata/cover_sm.png" />

<meta name="author" content="Roger D. Peng" />


<meta name="date" content="2020-05-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="getting-started-with-r.html"/>
<link rel="next" href="exploratory-data-analysis-checklist.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Exploratory Data Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#stay-in-touch"><i class="fa fa-check"></i>Stay in Touch!</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html"><i class="fa fa-check"></i><b>2</b> Getting Started with R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#installation"><i class="fa fa-check"></i><b>2.1</b> Installation</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#getting-started-with-the-r-interface"><i class="fa fa-check"></i><b>2.2</b> Getting started with the R interface</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html"><i class="fa fa-check"></i><b>3</b> Managing Data Frames with the <code>dplyr</code> package</a>
<ul>
<li class="chapter" data-level="3.1" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#data-frames"><i class="fa fa-check"></i><b>3.1</b> Data Frames</a></li>
<li class="chapter" data-level="3.2" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#the-dplyr-package"><i class="fa fa-check"></i><b>3.2</b> The <code>dplyr</code> Package</a></li>
<li class="chapter" data-level="3.3" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#dplyr-grammar"><i class="fa fa-check"></i><b>3.3</b> <code>dplyr</code> Grammar</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#common-dplyr-function-properties"><i class="fa fa-check"></i><b>3.3.1</b> Common <code>dplyr</code> Function Properties</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#installing-the-dplyr-package"><i class="fa fa-check"></i><b>3.4</b> Installing the <code>dplyr</code> package</a></li>
<li class="chapter" data-level="3.5" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#select"><i class="fa fa-check"></i><b>3.5</b> <code>select()</code></a></li>
<li class="chapter" data-level="3.6" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#filter"><i class="fa fa-check"></i><b>3.6</b> <code>filter()</code></a></li>
<li class="chapter" data-level="3.7" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#arrange"><i class="fa fa-check"></i><b>3.7</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="3.8" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#rename"><i class="fa fa-check"></i><b>3.8</b> <code>rename()</code></a></li>
<li class="chapter" data-level="3.9" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#mutate"><i class="fa fa-check"></i><b>3.9</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="3.10" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#group_by"><i class="fa fa-check"></i><b>3.10</b> <code>group_by()</code></a></li>
<li class="chapter" data-level="3.11" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#section"><i class="fa fa-check"></i><b>3.11</b> <code>%&gt;%</code></a></li>
<li class="chapter" data-level="3.12" data-path="managing-data-frames-with-the-dplyr-package.html"><a href="managing-data-frames-with-the-dplyr-package.html#summary"><i class="fa fa-check"></i><b>3.12</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html"><i class="fa fa-check"></i><b>4</b> Exploratory Data Analysis Checklist</a>
<ul>
<li class="chapter" data-level="4.1" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#formulate-your-question"><i class="fa fa-check"></i><b>4.1</b> Formulate your question</a></li>
<li class="chapter" data-level="4.2" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#read-in-your-data"><i class="fa fa-check"></i><b>4.2</b> Read in your data</a></li>
<li class="chapter" data-level="4.3" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#check-the-packaging"><i class="fa fa-check"></i><b>4.3</b> Check the packaging</a></li>
<li class="chapter" data-level="4.4" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#run-str"><i class="fa fa-check"></i><b>4.4</b> Run <code>str()</code></a></li>
<li class="chapter" data-level="4.5" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#look-at-the-top-and-the-bottom-of-your-data"><i class="fa fa-check"></i><b>4.5</b> Look at the top and the bottom of your data</a></li>
<li class="chapter" data-level="4.6" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#check-your-ns"><i class="fa fa-check"></i><b>4.6</b> Check your “n”s</a></li>
<li class="chapter" data-level="4.7" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#validate-with-at-least-one-external-data-source"><i class="fa fa-check"></i><b>4.7</b> Validate with at least one external data source</a></li>
<li class="chapter" data-level="4.8" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#try-the-easy-solution-first"><i class="fa fa-check"></i><b>4.8</b> Try the easy solution first</a></li>
<li class="chapter" data-level="4.9" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#challenge-your-solution"><i class="fa fa-check"></i><b>4.9</b> Challenge your solution</a></li>
<li class="chapter" data-level="4.10" data-path="exploratory-data-analysis-checklist.html"><a href="exploratory-data-analysis-checklist.html#follow-up-questions"><i class="fa fa-check"></i><b>4.10</b> Follow up questions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="principles-of-analytic-graphics.html"><a href="principles-of-analytic-graphics.html"><i class="fa fa-check"></i><b>5</b> Principles of Analytic Graphics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="principles-of-analytic-graphics.html"><a href="principles-of-analytic-graphics.html#show-comparisons"><i class="fa fa-check"></i><b>5.1</b> Show comparisons</a></li>
<li class="chapter" data-level="5.2" data-path="principles-of-analytic-graphics.html"><a href="principles-of-analytic-graphics.html#show-causality-mechanism-explanation-systematic-structure"><i class="fa fa-check"></i><b>5.2</b> Show causality, mechanism, explanation, systematic structure</a></li>
<li class="chapter" data-level="5.3" data-path="principles-of-analytic-graphics.html"><a href="principles-of-analytic-graphics.html#show-multivariate-data"><i class="fa fa-check"></i><b>5.3</b> Show multivariate data</a></li>
<li class="chapter" data-level="5.4" data-path="principles-of-analytic-graphics.html"><a href="principles-of-analytic-graphics.html#integrate-evidence"><i class="fa fa-check"></i><b>5.4</b> Integrate evidence</a></li>
<li class="chapter" data-level="5.5" data-path="principles-of-analytic-graphics.html"><a href="principles-of-analytic-graphics.html#describe-and-document-the-evidence"><i class="fa fa-check"></i><b>5.5</b> Describe and document the evidence</a></li>
<li class="chapter" data-level="5.6" data-path="principles-of-analytic-graphics.html"><a href="principles-of-analytic-graphics.html#content-content-content"><i class="fa fa-check"></i><b>5.6</b> Content, Content, Content</a></li>
<li class="chapter" data-level="5.7" data-path="principles-of-analytic-graphics.html"><a href="principles-of-analytic-graphics.html#references"><i class="fa fa-check"></i><b>5.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html"><i class="fa fa-check"></i><b>6</b> Exploratory Graphs</a>
<ul>
<li class="chapter" data-level="6.1" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#characteristics-of-exploratory-graphs"><i class="fa fa-check"></i><b>6.1</b> Characteristics of exploratory graphs</a></li>
<li class="chapter" data-level="6.2" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#air-pollution-in-the-united-states"><i class="fa fa-check"></i><b>6.2</b> Air Pollution in the United States</a></li>
<li class="chapter" data-level="6.3" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#getting-the-data"><i class="fa fa-check"></i><b>6.3</b> Getting the Data</a></li>
<li class="chapter" data-level="6.4" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#simple-summaries-one-dimension"><i class="fa fa-check"></i><b>6.4</b> Simple Summaries: One Dimension</a></li>
<li class="chapter" data-level="6.5" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#five-number-summary"><i class="fa fa-check"></i><b>6.5</b> Five Number Summary</a></li>
<li class="chapter" data-level="6.6" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#boxplot"><i class="fa fa-check"></i><b>6.6</b> Boxplot</a></li>
<li class="chapter" data-level="6.7" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#histogram"><i class="fa fa-check"></i><b>6.7</b> Histogram</a></li>
<li class="chapter" data-level="6.8" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#overlaying-features"><i class="fa fa-check"></i><b>6.8</b> Overlaying Features</a></li>
<li class="chapter" data-level="6.9" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#barplot"><i class="fa fa-check"></i><b>6.9</b> Barplot</a></li>
<li class="chapter" data-level="6.10" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#simple-summaries-two-dimensions-and-beyond"><i class="fa fa-check"></i><b>6.10</b> Simple Summaries: Two Dimensions and Beyond</a></li>
<li class="chapter" data-level="6.11" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#multiple-boxplots"><i class="fa fa-check"></i><b>6.11</b> Multiple Boxplots</a></li>
<li class="chapter" data-level="6.12" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#multiple-histograms"><i class="fa fa-check"></i><b>6.12</b> Multiple Histograms</a></li>
<li class="chapter" data-level="6.13" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#scatterplots"><i class="fa fa-check"></i><b>6.13</b> Scatterplots</a></li>
<li class="chapter" data-level="6.14" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#scatterplot---using-color"><i class="fa fa-check"></i><b>6.14</b> Scatterplot - Using Color</a></li>
<li class="chapter" data-level="6.15" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#multiple-scatterplots"><i class="fa fa-check"></i><b>6.15</b> Multiple Scatterplots</a></li>
<li class="chapter" data-level="6.16" data-path="exploratory-graphs.html"><a href="exploratory-graphs.html#summary-1"><i class="fa fa-check"></i><b>6.16</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="plotting-systems.html"><a href="plotting-systems.html"><i class="fa fa-check"></i><b>7</b> Plotting Systems</a>
<ul>
<li class="chapter" data-level="7.1" data-path="plotting-systems.html"><a href="plotting-systems.html#the-base-plotting-system"><i class="fa fa-check"></i><b>7.1</b> The Base Plotting System</a></li>
<li class="chapter" data-level="7.2" data-path="plotting-systems.html"><a href="plotting-systems.html#the-lattice-system"><i class="fa fa-check"></i><b>7.2</b> The Lattice System</a></li>
<li class="chapter" data-level="7.3" data-path="plotting-systems.html"><a href="plotting-systems.html#the-ggplot2-system"><i class="fa fa-check"></i><b>7.3</b> The ggplot2 System</a></li>
<li class="chapter" data-level="7.4" data-path="plotting-systems.html"><a href="plotting-systems.html#references-1"><i class="fa fa-check"></i><b>7.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="graphics-devices.html"><a href="graphics-devices.html"><i class="fa fa-check"></i><b>8</b> Graphics Devices</a>
<ul>
<li class="chapter" data-level="8.1" data-path="graphics-devices.html"><a href="graphics-devices.html#the-process-of-making-a-plot"><i class="fa fa-check"></i><b>8.1</b> The Process of Making a Plot</a></li>
<li class="chapter" data-level="8.2" data-path="graphics-devices.html"><a href="graphics-devices.html#how-does-a-plot-get-created"><i class="fa fa-check"></i><b>8.2</b> How Does a Plot Get Created?</a></li>
<li class="chapter" data-level="8.3" data-path="graphics-devices.html"><a href="graphics-devices.html#graphics-file-devices"><i class="fa fa-check"></i><b>8.3</b> Graphics File Devices</a></li>
<li class="chapter" data-level="8.4" data-path="graphics-devices.html"><a href="graphics-devices.html#multiple-open-graphics-devices"><i class="fa fa-check"></i><b>8.4</b> Multiple Open Graphics Devices</a></li>
<li class="chapter" data-level="8.5" data-path="graphics-devices.html"><a href="graphics-devices.html#copying-plots"><i class="fa fa-check"></i><b>8.5</b> Copying Plots</a></li>
<li class="chapter" data-level="8.6" data-path="graphics-devices.html"><a href="graphics-devices.html#summary-2"><i class="fa fa-check"></i><b>8.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html"><i class="fa fa-check"></i><b>9</b> The Base Plotting System</a>
<ul>
<li class="chapter" data-level="9.1" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#base-graphics"><i class="fa fa-check"></i><b>9.1</b> Base Graphics</a></li>
<li class="chapter" data-level="9.2" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#simple-base-graphics"><i class="fa fa-check"></i><b>9.2</b> Simple Base Graphics</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#histogram-1"><i class="fa fa-check"></i><b>9.2.1</b> Histogram</a></li>
<li class="chapter" data-level="9.2.2" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#boxplot-1"><i class="fa fa-check"></i><b>9.2.2</b> Boxplot</a></li>
<li class="chapter" data-level="9.2.3" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#scatterplot"><i class="fa fa-check"></i><b>9.2.3</b> Scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#some-important-base-graphics-parameters"><i class="fa fa-check"></i><b>9.3</b> Some Important Base Graphics Parameters</a></li>
<li class="chapter" data-level="9.4" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#base-plotting-functions"><i class="fa fa-check"></i><b>9.4</b> Base Plotting Functions</a></li>
<li class="chapter" data-level="9.5" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#base-plot-with-regression-line"><i class="fa fa-check"></i><b>9.5</b> Base Plot with Regression Line</a></li>
<li class="chapter" data-level="9.6" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#multiple-base-plots"><i class="fa fa-check"></i><b>9.6</b> Multiple Base Plots</a></li>
<li class="chapter" data-level="9.7" data-path="the-base-plotting-system-1.html"><a href="the-base-plotting-system-1.html#summary-3"><i class="fa fa-check"></i><b>9.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html"><i class="fa fa-check"></i><b>10</b> Plotting and Color in R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#colors-1-2-and-3"><i class="fa fa-check"></i><b>10.1</b> Colors 1, 2, and 3</a></li>
<li class="chapter" data-level="10.2" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#connecting-colors-with-data"><i class="fa fa-check"></i><b>10.2</b> Connecting colors with data</a></li>
<li class="chapter" data-level="10.3" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#color-utilities-in-r"><i class="fa fa-check"></i><b>10.3</b> Color Utilities in R</a></li>
<li class="chapter" data-level="10.4" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#colorramp"><i class="fa fa-check"></i><b>10.4</b> <code>colorRamp()</code></a></li>
<li class="chapter" data-level="10.5" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#colorramppalette"><i class="fa fa-check"></i><b>10.5</b> <code>colorRampPalette()</code></a></li>
<li class="chapter" data-level="10.6" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#rcolorbrewer-package"><i class="fa fa-check"></i><b>10.6</b> RColorBrewer Package</a></li>
<li class="chapter" data-level="10.7" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#using-the-rcolorbrewer-palettes"><i class="fa fa-check"></i><b>10.7</b> Using the RColorBrewer palettes</a></li>
<li class="chapter" data-level="10.8" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#the-smoothscatter-function"><i class="fa fa-check"></i><b>10.8</b> The <code>smoothScatter()</code> function</a></li>
<li class="chapter" data-level="10.9" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#adding-transparency"><i class="fa fa-check"></i><b>10.9</b> Adding transparency</a></li>
<li class="chapter" data-level="10.10" data-path="plotting-and-color-in-r.html"><a href="plotting-and-color-in-r.html#summary-4"><i class="fa fa-check"></i><b>10.10</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html"><i class="fa fa-check"></i><b>11</b> Hierarchical Clustering</a>
<ul>
<li class="chapter" data-level="11.1" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#hierarchical-clustering-1"><i class="fa fa-check"></i><b>11.1</b> Hierarchical clustering</a></li>
<li class="chapter" data-level="11.2" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#how-do-we-define-close"><i class="fa fa-check"></i><b>11.2</b> How do we define close?</a></li>
<li class="chapter" data-level="11.3" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#example-euclidean-distance"><i class="fa fa-check"></i><b>11.3</b> Example: Euclidean distance</a></li>
<li class="chapter" data-level="11.4" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#example-manhattan-distance"><i class="fa fa-check"></i><b>11.4</b> Example: Manhattan distance</a></li>
<li class="chapter" data-level="11.5" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#example-hierarchical-clustering"><i class="fa fa-check"></i><b>11.5</b> Example: Hierarchical clustering</a></li>
<li class="chapter" data-level="11.6" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#prettier-dendrograms"><i class="fa fa-check"></i><b>11.6</b> Prettier dendrograms</a></li>
<li class="chapter" data-level="11.7" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#merging-points-complete"><i class="fa fa-check"></i><b>11.7</b> Merging points: Complete</a></li>
<li class="chapter" data-level="11.8" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#merging-points-average"><i class="fa fa-check"></i><b>11.8</b> Merging points: Average</a></li>
<li class="chapter" data-level="11.9" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#using-the-heatmap-function"><i class="fa fa-check"></i><b>11.9</b> Using the <code>heatmap()</code> function</a></li>
<li class="chapter" data-level="11.10" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#notes-and-further-resources"><i class="fa fa-check"></i><b>11.10</b> Notes and further resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="k-means-clustering.html"><a href="k-means-clustering.html"><i class="fa fa-check"></i><b>12</b> K-Means Clustering</a>
<ul>
<li class="chapter" data-level="12.1" data-path="k-means-clustering.html"><a href="k-means-clustering.html#illustrating-the-k-means-algorithm"><i class="fa fa-check"></i><b>12.1</b> Illustrating the K-means algorithm</a></li>
<li class="chapter" data-level="12.2" data-path="k-means-clustering.html"><a href="k-means-clustering.html#stopping-the-algorithm"><i class="fa fa-check"></i><b>12.2</b> Stopping the algorithm</a></li>
<li class="chapter" data-level="12.3" data-path="k-means-clustering.html"><a href="k-means-clustering.html#using-the-kmeans-function"><i class="fa fa-check"></i><b>12.3</b> Using the <code>kmeans()</code> function</a></li>
<li class="chapter" data-level="12.4" data-path="k-means-clustering.html"><a href="k-means-clustering.html#building-heatmaps-from-k-means-solutions"><i class="fa fa-check"></i><b>12.4</b> Building heatmaps from K-means solutions</a></li>
<li class="chapter" data-level="12.5" data-path="k-means-clustering.html"><a href="k-means-clustering.html#notes-and-further-resources-1"><i class="fa fa-check"></i><b>12.5</b> Notes and further resources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="dimension-reduction.html"><a href="dimension-reduction.html"><i class="fa fa-check"></i><b>13</b> Dimension Reduction</a>
<ul>
<li class="chapter" data-level="13.1" data-path="dimension-reduction.html"><a href="dimension-reduction.html#matrix-data"><i class="fa fa-check"></i><b>13.1</b> Matrix data</a></li>
<li class="chapter" data-level="13.2" data-path="dimension-reduction.html"><a href="dimension-reduction.html#patterns-in-rows-and-columns"><i class="fa fa-check"></i><b>13.2</b> Patterns in rows and columns</a></li>
<li class="chapter" data-level="13.3" data-path="dimension-reduction.html"><a href="dimension-reduction.html#related-problem"><i class="fa fa-check"></i><b>13.3</b> Related problem</a></li>
<li class="chapter" data-level="13.4" data-path="dimension-reduction.html"><a href="dimension-reduction.html#svd-and-pca"><i class="fa fa-check"></i><b>13.4</b> SVD and PCA</a></li>
<li class="chapter" data-level="13.5" data-path="dimension-reduction.html"><a href="dimension-reduction.html#unpacking-the-svd-u-and-v"><i class="fa fa-check"></i><b>13.5</b> Unpacking the SVD: <em>u</em> and <em>v</em></a></li>
<li class="chapter" data-level="13.6" data-path="dimension-reduction.html"><a href="dimension-reduction.html#svd-for-data-compression"><i class="fa fa-check"></i><b>13.6</b> SVD for data compression</a></li>
<li class="chapter" data-level="13.7" data-path="dimension-reduction.html"><a href="dimension-reduction.html#components-of-the-svd---variance-explained"><i class="fa fa-check"></i><b>13.7</b> Components of the SVD - Variance explained</a></li>
<li class="chapter" data-level="13.8" data-path="dimension-reduction.html"><a href="dimension-reduction.html#relationship-to-principal-components"><i class="fa fa-check"></i><b>13.8</b> Relationship to principal components</a></li>
<li class="chapter" data-level="13.9" data-path="dimension-reduction.html"><a href="dimension-reduction.html#what-if-we-add-a-second-pattern"><i class="fa fa-check"></i><b>13.9</b> What if we add a second pattern?</a></li>
<li class="chapter" data-level="13.10" data-path="dimension-reduction.html"><a href="dimension-reduction.html#dealing-with-missing-values"><i class="fa fa-check"></i><b>13.10</b> Dealing with missing values</a></li>
<li class="chapter" data-level="13.11" data-path="dimension-reduction.html"><a href="dimension-reduction.html#example-face-data"><i class="fa fa-check"></i><b>13.11</b> Example: Face data</a></li>
<li class="chapter" data-level="13.12" data-path="dimension-reduction.html"><a href="dimension-reduction.html#notes-and-further-resources-2"><i class="fa fa-check"></i><b>13.12</b> Notes and further resources</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html"><i class="fa fa-check"></i><b>14</b> The ggplot2 Plotting System: Part 1</a>
<ul>
<li class="chapter" data-level="14.1" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#the-basics-qplot"><i class="fa fa-check"></i><b>14.1</b> The Basics: <code>qplot()</code></a></li>
<li class="chapter" data-level="14.2" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#before-you-start-label-your-data"><i class="fa fa-check"></i><b>14.2</b> Before You Start: Label Your Data</a></li>
<li class="chapter" data-level="14.3" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#ggplot2-hello-world"><i class="fa fa-check"></i><b>14.3</b> ggplot2 “Hello, world!”</a></li>
<li class="chapter" data-level="14.4" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#modifying-aesthetics"><i class="fa fa-check"></i><b>14.4</b> Modifying aesthetics</a></li>
<li class="chapter" data-level="14.5" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#adding-a-geom"><i class="fa fa-check"></i><b>14.5</b> Adding a geom</a></li>
<li class="chapter" data-level="14.6" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#histograms"><i class="fa fa-check"></i><b>14.6</b> Histograms</a></li>
<li class="chapter" data-level="14.7" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#facets"><i class="fa fa-check"></i><b>14.7</b> Facets</a></li>
<li class="chapter" data-level="14.8" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#case-study-maacs-cohort"><i class="fa fa-check"></i><b>14.8</b> Case Study: MAACS Cohort</a></li>
<li class="chapter" data-level="14.9" data-path="the-ggplot2-plotting-system-part-1.html"><a href="the-ggplot2-plotting-system-part-1.html#summary-of-qplot"><i class="fa fa-check"></i><b>14.9</b> Summary of qplot()</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html"><i class="fa fa-check"></i><b>15</b> The ggplot2 Plotting System: Part 2</a>
<ul>
<li class="chapter" data-level="15.1" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#basic-components-of-a-ggplot2-plot"><i class="fa fa-check"></i><b>15.1</b> Basic Components of a ggplot2 Plot</a></li>
<li class="chapter" data-level="15.2" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#example-bmi-pm2.5-asthma"><i class="fa fa-check"></i><b>15.2</b> Example: BMI, PM2.5, Asthma</a></li>
<li class="chapter" data-level="15.3" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#building-up-in-layers"><i class="fa fa-check"></i><b>15.3</b> Building Up in Layers</a></li>
<li class="chapter" data-level="15.4" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#first-plot-with-point-layer"><i class="fa fa-check"></i><b>15.4</b> First Plot with Point Layer</a></li>
<li class="chapter" data-level="15.5" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#adding-more-layers-smooth"><i class="fa fa-check"></i><b>15.5</b> Adding More Layers: Smooth</a></li>
<li class="chapter" data-level="15.6" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#adding-more-layers-facets"><i class="fa fa-check"></i><b>15.6</b> Adding More Layers: Facets</a></li>
<li class="chapter" data-level="15.7" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#modifying-geom-properties"><i class="fa fa-check"></i><b>15.7</b> Modifying Geom Properties</a></li>
<li class="chapter" data-level="15.8" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#modifying-labels"><i class="fa fa-check"></i><b>15.8</b> Modifying Labels</a></li>
<li class="chapter" data-level="15.9" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#customizing-the-smooth"><i class="fa fa-check"></i><b>15.9</b> Customizing the Smooth</a></li>
<li class="chapter" data-level="15.10" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#changing-the-theme"><i class="fa fa-check"></i><b>15.10</b> Changing the Theme</a></li>
<li class="chapter" data-level="15.11" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#more-complex-example"><i class="fa fa-check"></i><b>15.11</b> More Complex Example</a></li>
<li class="chapter" data-level="15.12" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#a-quick-aside-about-axis-limits"><i class="fa fa-check"></i><b>15.12</b> A Quick Aside about Axis Limits</a></li>
<li class="chapter" data-level="15.13" data-path="the-ggplot2-plotting-system-part-2.html"><a href="the-ggplot2-plotting-system-part-2.html#resources"><i class="fa fa-check"></i><b>15.13</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><i class="fa fa-check"></i><b>16</b> Data Analysis Case Study: Changes in Fine Particle Air Pollution in the U.S.</a>
<ul>
<li class="chapter" data-level="16.1" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html#synopsis"><i class="fa fa-check"></i><b>16.1</b> Synopsis</a></li>
<li class="chapter" data-level="16.2" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html#loading-and-processing-the-raw-data"><i class="fa fa-check"></i><b>16.2</b> Loading and Processing the Raw Data</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html#reading-in-the-1999-data"><i class="fa fa-check"></i><b>16.2.1</b> Reading in the 1999 data</a></li>
<li class="chapter" data-level="16.2.2" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html#reading-in-the-2012-data"><i class="fa fa-check"></i><b>16.2.2</b> Reading in the 2012 data</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html#results"><i class="fa fa-check"></i><b>16.3</b> Results</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html#entire-u.s.-analysis"><i class="fa fa-check"></i><b>16.3.1</b> Entire U.S. analysis</a></li>
<li class="chapter" data-level="16.3.2" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html#changes-in-pm-levels-at-an-individual-monitor"><i class="fa fa-check"></i><b>16.3.2</b> Changes in PM levels at an individual monitor</a></li>
<li class="chapter" data-level="16.3.3" data-path="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html"><a href="data-analysis-case-study-changes-in-fine-particle-air-pollution-in-the-u-s-.html#changes-in-state-wide-pm-levels"><i class="fa fa-check"></i><b>16.3.3</b> Changes in state-wide PM levels</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i><b>17</b> About the Author</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploratory Data Analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="managing-data-frames-with-the-dplyr-package" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Managing Data Frames with the <code>dplyr</code> package</h1>
<p><a href="https://youtu.be/aywFompr1F4">Watch a video of this chapter</a></p>
<div id="data-frames" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Data Frames</h2>
<p>The <em>data frame</em> is a key data structure in statistics and in R. The basic structure of a data frame is that there is one observation per row and each column represents a variable, a measure, feature, or characteristic of that observation. R has an internal implementation of data frames that is likely the one you will use most often. However, there are packages on CRAN that implement data frames via things like relational databases that allow you to operate on very very large data frames (but we won’t discuss them here).</p>
<p>Given the importance of managing data frames, it’s important that we have good tools for dealing with them. R obviously has some built-in tools like the <code>subset()</code> function and the use of <code>[</code> and <code>$</code> operators to extract subsets of data frames. However, other operations, like filtering, re-ordering, and collapsing, can often be tedious operations in R whose syntax is not very intuitive. The <code>dplyr</code> package is designed to mitigate a lot of these problems and to provide a highly optimized set of routines specifically for dealing with data frames.</p>
</div>
<div id="the-dplyr-package" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> The <code>dplyr</code> Package</h2>
<p>The <code>dplyr</code> package was developed by Hadley Wickham of RStudio and is an optimized and distilled version of his <code>plyr</code> package. The <code>dplyr</code> package does not provide any “new” functionality to R per se, in the sense that everything <code>dplyr</code> does could already be done with base R, but it <em>greatly</em> simplifies existing functionality in R.</p>
<p>One important contribution of the <code>dplyr</code> package is that it provides a “grammar” (in particular, verbs) for data manipulation and for operating on data frames. With this grammar, you can sensibly communicate what it is that you are doing to a data frame that other people can understand (assuming they also know the grammar). This is useful because it provides an abstraction for data manipulation that previously did not exist. Another useful contribution is that the <code>dplyr</code> functions are <strong>very</strong> fast, as many key operations are coded in C++.</p>
</div>
<div id="dplyr-grammar" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> <code>dplyr</code> Grammar</h2>
<p>Some of the key “verbs” provided by the <code>dplyr</code> package are</p>
<ul>
<li><p><code>select</code>: return a subset of the columns of a data frame, using a flexible notation</p></li>
<li><p><code>filter</code>: extract a subset of rows from a data frame based on logical conditions</p></li>
<li><p><code>arrange</code>: reorder rows of a data frame</p></li>
<li><p><code>rename</code>: rename variables in a data frame</p></li>
<li><p><code>mutate</code>: add new variables/columns or transform existing variables</p></li>
<li><p><code>summarise</code> / <code>summarize</code>: generate summary statistics of different
variables in the data frame, possibly within strata</p></li>
<li><p><code>%&gt;%</code>: the “pipe” operator is used to connect multiple verb actions together into a pipeline</p></li>
</ul>
<p>The <code>dplyr</code> package as a number of its own data types that it takes advantage of. For example, there is a handy <code>print</code> method that prevents you from printing a lot of data to the console. Most of the time, these additional data types are transparent to the user and do not need to be worried about.</p>
<div id="common-dplyr-function-properties" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Common <code>dplyr</code> Function Properties</h3>
<p>All of the functions that we will discuss in this Chapter will have a few common characteristics. In particular,</p>
<ol style="list-style-type: decimal">
<li><p>The first argument is a data frame.</p></li>
<li><p>The subsequent arguments describe what to do with the data frame specified in the first argument, and you can refer to columns in the data frame directly without using the $ operator (just use the column names).</p></li>
<li><p>The return result of a function is a new data frame</p></li>
<li><p>Data frames must be properly formatted and annotated for this to all be useful. In particular, the data must be <a href="http://www.jstatsoft.org/v59/i10/paper">tidy</a>. In short, there should be one observation per row, and each column should represent a feature or characteristic of that observation.</p></li>
</ol>
</div>
</div>
<div id="installing-the-dplyr-package" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Installing the <code>dplyr</code> package</h2>
<p>The <code>dplyr</code> package can be installed from CRAN or from GitHub using the <code>devtools</code> package and the <code>install_github()</code> function. The GitHub repository will usually contain the latest updates to the package and the development version.</p>
<p>To install from CRAN, just run</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb1-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<p>To install from GitHub you can run</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb2-1"></a><span class="op">&gt;</span><span class="st"> </span>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;tidyverse/dplyr&quot;</span>)</span></code></pre></div>
<p>After installing the package it is important that you load it into your R session with the <code>library()</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(dplyr)</span>
<span id="cb3-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-2"></a></span>
<span id="cb3-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-3"></a>Attaching package<span class="op">:</span><span class="st"> &#39;dplyr&#39;</span></span>
<span id="cb3-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-4"></a>The following objects are masked from <span class="st">&#39;package:stats&#39;</span><span class="op">:</span></span>
<span id="cb3-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-5"></a></span>
<span id="cb3-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-6"></a><span class="st">    </span>filter, lag</span>
<span id="cb3-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-7"></a>The following objects are masked from <span class="st">&#39;package:base&#39;</span><span class="op">:</span></span>
<span id="cb3-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-8"></a></span>
<span id="cb3-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb3-9"></a><span class="st">    </span>intersect, setdiff, setequal, union</span></code></pre></div>
<p>You may get some warnings when the package is loaded because there are functions in the <code>dplyr</code> package that have the same name as functions in other packages. For now you can ignore the warnings.</p>
<p>NOTE: If you ever run into a problem where R is getting confused over which function you mean to call, you can specify the <em>full name</em> of a function using the <code>::</code> operator. The full name is simply the package name from which the function is defined followed by <code>::</code> and then the function name. For example, the <code>filter</code> function from the <code>dplyr</code> package has the full name <code>dplyr::filter</code>. Calling functions with their full name will resolve any confusion over which function was meant to be called.</p>
</div>
<div id="select" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> <code>select()</code></h2>
<p>For the examples in this chapter we will be using a dataset containing air pollution and temperature data for the <a href="http://www.biostat.jhsph.edu/~rpeng/leanpub/rprog/chicago_data.zip">city of Chicago</a> in the U.S. The dataset is available from my web site.</p>
<p>After unzipping the archive, you can load the data into R using the <code>readRDS()</code> function.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb4-1"></a><span class="op">&gt;</span><span class="st"> </span>chicago &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;data/chicago.rds&quot;</span>)</span></code></pre></div>
<p>You can see some basic characteristics of the dataset with the <code>dim()</code> and <code>str()</code> functions.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(chicago)</span>
<span id="cb5-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-2"></a>[<span class="dv">1</span>] <span class="dv">6940</span>    <span class="dv">8</span></span>
<span id="cb5-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(chicago)</span>
<span id="cb5-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-4"></a><span class="st">&#39;data.frame&#39;</span><span class="op">:</span><span class="st">   </span><span class="dv">6940</span> obs. of  <span class="dv">8</span> variables<span class="op">:</span></span>
<span id="cb5-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-5"></a><span class="st"> </span><span class="er">$</span><span class="st"> </span>city      <span class="op">:</span><span class="st"> </span>chr  <span class="st">&quot;chic&quot;</span> <span class="st">&quot;chic&quot;</span> <span class="st">&quot;chic&quot;</span> <span class="st">&quot;chic&quot;</span> ...</span>
<span id="cb5-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-6"></a> <span class="op">$</span><span class="st"> </span>tmpd      <span class="op">:</span><span class="st"> </span>num  <span class="fl">31.5</span> <span class="dv">33</span> <span class="dv">33</span> <span class="dv">29</span> <span class="dv">32</span> <span class="dv">40</span> <span class="fl">34.5</span> <span class="dv">29</span> <span class="fl">26.5</span> <span class="fl">32.5</span> ...</span>
<span id="cb5-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-7"></a> <span class="op">$</span><span class="st"> </span>dptp      <span class="op">:</span><span class="st"> </span>num  <span class="fl">31.5</span> <span class="fl">29.9</span> <span class="fl">27.4</span> <span class="fl">28.6</span> <span class="fl">28.9</span> ...</span>
<span id="cb5-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-8"></a> <span class="op">$</span><span class="st"> </span>date      <span class="op">:</span><span class="st"> </span>Date, format<span class="op">:</span><span class="st"> &quot;1987-01-01&quot;</span> <span class="st">&quot;1987-01-02&quot;</span> ...</span>
<span id="cb5-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-9"></a> <span class="op">$</span><span class="st"> </span>pm25tmean2<span class="op">:</span><span class="st"> </span>num  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...</span>
<span id="cb5-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-10"></a> <span class="op">$</span><span class="st"> </span>pm10tmean2<span class="op">:</span><span class="st"> </span>num  <span class="dv">34</span> <span class="ot">NA</span> <span class="fl">34.2</span> <span class="dv">47</span> <span class="ot">NA</span> ...</span>
<span id="cb5-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-11"></a> <span class="op">$</span><span class="st"> </span>o3tmean2  <span class="op">:</span><span class="st"> </span>num  <span class="fl">4.25</span> <span class="fl">3.3</span> <span class="fl">3.33</span> <span class="fl">4.38</span> <span class="fl">4.75</span> ...</span>
<span id="cb5-12"><a href="managing-data-frames-with-the-dplyr-package.html#cb5-12"></a> <span class="op">$</span><span class="st"> </span>no2tmean2 <span class="op">:</span><span class="st"> </span>num  <span class="dv">20</span> <span class="fl">23.2</span> <span class="fl">23.8</span> <span class="fl">30.4</span> <span class="fl">30.3</span> ...</span></code></pre></div>
<p>The <code>select()</code> function can be used to select columns of a data frame that you want to focus on. Often you’ll have a large data frame containing “all” of the data, but any <em>given</em> analysis might only use a subset of variables or observations. The <code>select()</code> function allows you to get the few columns you might need.</p>
<p>Suppose we wanted to take the first 3 columns only. There are a few ways to do this. We could for example use numerical indices. But we can also use the names directly.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(chicago)[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</span>
<span id="cb6-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-2"></a>[<span class="dv">1</span>] <span class="st">&quot;city&quot;</span> <span class="st">&quot;tmpd&quot;</span> <span class="st">&quot;dptp&quot;</span></span>
<span id="cb6-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-3"></a><span class="op">&gt;</span><span class="st"> </span>subset &lt;-<span class="st"> </span><span class="kw">select</span>(chicago, city<span class="op">:</span>dptp)</span>
<span id="cb6-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(subset)</span>
<span id="cb6-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-5"></a>  city tmpd   dptp</span>
<span id="cb6-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-6"></a><span class="dv">1</span> chic <span class="fl">31.5</span> <span class="fl">31.500</span></span>
<span id="cb6-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-7"></a><span class="dv">2</span> chic <span class="fl">33.0</span> <span class="fl">29.875</span></span>
<span id="cb6-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-8"></a><span class="dv">3</span> chic <span class="fl">33.0</span> <span class="fl">27.375</span></span>
<span id="cb6-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-9"></a><span class="dv">4</span> chic <span class="fl">29.0</span> <span class="fl">28.625</span></span>
<span id="cb6-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-10"></a><span class="dv">5</span> chic <span class="fl">32.0</span> <span class="fl">28.875</span></span>
<span id="cb6-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb6-11"></a><span class="dv">6</span> chic <span class="fl">40.0</span> <span class="fl">35.125</span></span></code></pre></div>
<p>Note that the <code>:</code> normally cannot be used with names or strings, but inside the <code>select()</code> function you can use it to specify a range of variable names.</p>
<p>You can also <em>omit</em> variables using the <code>select()</code> function by using the negative sign. With <code>select()</code> you can do</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb7-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(chicago, <span class="op">-</span>(city<span class="op">:</span>dptp))</span></code></pre></div>
<p>which indicates that we should include every variable <em>except</em> the variables <code>city</code> through <code>dptp</code>.
The equivalent code in base R would be</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb8-1"></a><span class="op">&gt;</span><span class="st"> </span>i &lt;-<span class="st"> </span><span class="kw">match</span>(<span class="st">&quot;city&quot;</span>, <span class="kw">names</span>(chicago))</span>
<span id="cb8-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb8-2"></a><span class="op">&gt;</span><span class="st"> </span>j &lt;-<span class="st"> </span><span class="kw">match</span>(<span class="st">&quot;dptp&quot;</span>, <span class="kw">names</span>(chicago))</span>
<span id="cb8-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb8-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(chicago[, <span class="op">-</span>(i<span class="op">:</span>j)])</span></code></pre></div>
<p>Not super intuitive, right?</p>
<p>The <code>select()</code> function also allows a special syntax that allows you to specify variable names based on patterns. So, for example, if you wanted to keep every variable that ends with a “2”, we could do</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb9-1"></a><span class="op">&gt;</span><span class="st"> </span>subset &lt;-<span class="st"> </span><span class="kw">select</span>(chicago, <span class="kw">ends_with</span>(<span class="st">&quot;2&quot;</span>))</span>
<span id="cb9-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb9-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(subset)</span>
<span id="cb9-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb9-3"></a><span class="st">&#39;data.frame&#39;</span><span class="op">:</span><span class="st">   </span><span class="dv">6940</span> obs. of  <span class="dv">4</span> variables<span class="op">:</span></span>
<span id="cb9-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb9-4"></a><span class="st"> </span><span class="er">$</span><span class="st"> </span>pm25tmean2<span class="op">:</span><span class="st"> </span>num  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...</span>
<span id="cb9-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb9-5"></a> <span class="op">$</span><span class="st"> </span>pm10tmean2<span class="op">:</span><span class="st"> </span>num  <span class="dv">34</span> <span class="ot">NA</span> <span class="fl">34.2</span> <span class="dv">47</span> <span class="ot">NA</span> ...</span>
<span id="cb9-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb9-6"></a> <span class="op">$</span><span class="st"> </span>o3tmean2  <span class="op">:</span><span class="st"> </span>num  <span class="fl">4.25</span> <span class="fl">3.3</span> <span class="fl">3.33</span> <span class="fl">4.38</span> <span class="fl">4.75</span> ...</span>
<span id="cb9-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb9-7"></a> <span class="op">$</span><span class="st"> </span>no2tmean2 <span class="op">:</span><span class="st"> </span>num  <span class="dv">20</span> <span class="fl">23.2</span> <span class="fl">23.8</span> <span class="fl">30.4</span> <span class="fl">30.3</span> ...</span></code></pre></div>
<p>Or if we wanted to keep every variable that starts with a “d”, we could do</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb10-1"></a><span class="op">&gt;</span><span class="st"> </span>subset &lt;-<span class="st"> </span><span class="kw">select</span>(chicago, <span class="kw">starts_with</span>(<span class="st">&quot;d&quot;</span>))</span>
<span id="cb10-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb10-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(subset)</span>
<span id="cb10-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb10-3"></a><span class="st">&#39;data.frame&#39;</span><span class="op">:</span><span class="st">   </span><span class="dv">6940</span> obs. of  <span class="dv">2</span> variables<span class="op">:</span></span>
<span id="cb10-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb10-4"></a><span class="st"> </span><span class="er">$</span><span class="st"> </span>dptp<span class="op">:</span><span class="st"> </span>num  <span class="fl">31.5</span> <span class="fl">29.9</span> <span class="fl">27.4</span> <span class="fl">28.6</span> <span class="fl">28.9</span> ...</span>
<span id="cb10-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb10-5"></a> <span class="op">$</span><span class="st"> </span>date<span class="op">:</span><span class="st"> </span>Date, format<span class="op">:</span><span class="st"> &quot;1987-01-01&quot;</span> <span class="st">&quot;1987-01-02&quot;</span> ...</span></code></pre></div>
<p>You can also use more general regular expressions if necessary. See the help page (<code>?select</code>) for more details.</p>
</div>
<div id="filter" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> <code>filter()</code></h2>
<p>The <code>filter()</code> function is used to extract subsets of rows from a data frame. This function is similar to the existing <code>subset()</code> function in R but is quite a bit faster in my experience.</p>
<p>Suppose we wanted to extract the rows of the <code>chicago</code> data frame where the levels of PM2.5 are greater than 30 (which is a reasonably high level), we could do</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-1"></a><span class="op">&gt;</span><span class="st"> </span>chic.f &lt;-<span class="st"> </span><span class="kw">filter</span>(chicago, pm25tmean2 <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>)</span>
<span id="cb11-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(chic.f)</span>
<span id="cb11-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-3"></a><span class="st">&#39;data.frame&#39;</span><span class="op">:</span><span class="st">   </span><span class="dv">194</span> obs. of  <span class="dv">8</span> variables<span class="op">:</span></span>
<span id="cb11-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-4"></a><span class="st"> </span><span class="er">$</span><span class="st"> </span>city      <span class="op">:</span><span class="st"> </span>chr  <span class="st">&quot;chic&quot;</span> <span class="st">&quot;chic&quot;</span> <span class="st">&quot;chic&quot;</span> <span class="st">&quot;chic&quot;</span> ...</span>
<span id="cb11-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-5"></a> <span class="op">$</span><span class="st"> </span>tmpd      <span class="op">:</span><span class="st"> </span>num  <span class="dv">23</span> <span class="dv">28</span> <span class="dv">55</span> <span class="dv">59</span> <span class="dv">57</span> <span class="dv">57</span> <span class="dv">75</span> <span class="dv">61</span> <span class="dv">73</span> <span class="dv">78</span> ...</span>
<span id="cb11-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-6"></a> <span class="op">$</span><span class="st"> </span>dptp      <span class="op">:</span><span class="st"> </span>num  <span class="fl">21.9</span> <span class="fl">25.8</span> <span class="fl">51.3</span> <span class="fl">53.7</span> <span class="dv">52</span> <span class="dv">56</span> <span class="fl">65.8</span> <span class="dv">59</span> <span class="fl">60.3</span> <span class="fl">67.1</span> ...</span>
<span id="cb11-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-7"></a> <span class="op">$</span><span class="st"> </span>date      <span class="op">:</span><span class="st"> </span>Date, format<span class="op">:</span><span class="st"> &quot;1998-01-17&quot;</span> <span class="st">&quot;1998-01-23&quot;</span> ...</span>
<span id="cb11-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-8"></a> <span class="op">$</span><span class="st"> </span>pm25tmean2<span class="op">:</span><span class="st"> </span>num  <span class="fl">38.1</span> <span class="dv">34</span> <span class="fl">39.4</span> <span class="fl">35.4</span> <span class="fl">33.3</span> ...</span>
<span id="cb11-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-9"></a> <span class="op">$</span><span class="st"> </span>pm10tmean2<span class="op">:</span><span class="st"> </span>num  <span class="fl">32.5</span> <span class="fl">38.7</span> <span class="dv">34</span> <span class="fl">28.5</span> <span class="dv">35</span> ...</span>
<span id="cb11-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-10"></a> <span class="op">$</span><span class="st"> </span>o3tmean2  <span class="op">:</span><span class="st"> </span>num  <span class="fl">3.18</span> <span class="fl">1.75</span> <span class="fl">10.79</span> <span class="fl">14.3</span> <span class="fl">20.66</span> ...</span>
<span id="cb11-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb11-11"></a> <span class="op">$</span><span class="st"> </span>no2tmean2 <span class="op">:</span><span class="st"> </span>num  <span class="fl">25.3</span> <span class="fl">29.4</span> <span class="fl">25.3</span> <span class="fl">31.4</span> <span class="fl">26.8</span> ...</span></code></pre></div>
<p>You can see that there are now only 194 rows in the data frame and the distribution of the <code>pm25tmean2</code> values is.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb12-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(chic.f<span class="op">$</span>pm25tmean2)</span>
<span id="cb12-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb12-2"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb12-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb12-3"></a>  <span class="fl">30.05</span>   <span class="fl">32.12</span>   <span class="fl">35.04</span>   <span class="fl">36.63</span>   <span class="fl">39.53</span>   <span class="fl">61.50</span> </span></code></pre></div>
<p>We can place an arbitrarily complex logical sequence inside of <code>filter()</code>, so we could for example extract the rows where PM2.5 is greater than 30 <em>and</em> temperature is greater than 80 degrees Fahrenheit.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-1"></a><span class="op">&gt;</span><span class="st"> </span>chic.f &lt;-<span class="st"> </span><span class="kw">filter</span>(chicago, pm25tmean2 <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span> <span class="op">&amp;</span><span class="st"> </span>tmpd <span class="op">&gt;</span><span class="st"> </span><span class="dv">80</span>)</span>
<span id="cb13-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(chic.f, date, tmpd, pm25tmean2)</span>
<span id="cb13-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-3"></a>         date tmpd pm25tmean2</span>
<span id="cb13-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-4"></a><span class="dv">1</span>  <span class="dv">1998-08-23</span>   <span class="dv">81</span>   <span class="fl">39.60000</span></span>
<span id="cb13-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-5"></a><span class="dv">2</span>  <span class="dv">1998-09-06</span>   <span class="dv">81</span>   <span class="fl">31.50000</span></span>
<span id="cb13-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-6"></a><span class="dv">3</span>  <span class="dv">2001-07-20</span>   <span class="dv">82</span>   <span class="fl">32.30000</span></span>
<span id="cb13-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-7"></a><span class="dv">4</span>  <span class="dv">2001-08-01</span>   <span class="dv">84</span>   <span class="fl">43.70000</span></span>
<span id="cb13-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-8"></a><span class="dv">5</span>  <span class="dv">2001-08-08</span>   <span class="dv">85</span>   <span class="fl">38.83750</span></span>
<span id="cb13-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-9"></a><span class="dv">6</span>  <span class="dv">2001-08-09</span>   <span class="dv">84</span>   <span class="fl">38.20000</span></span>
<span id="cb13-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-10"></a><span class="dv">7</span>  <span class="dv">2002-06-20</span>   <span class="dv">82</span>   <span class="fl">33.00000</span></span>
<span id="cb13-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-11"></a><span class="dv">8</span>  <span class="dv">2002-06-23</span>   <span class="dv">82</span>   <span class="fl">42.50000</span></span>
<span id="cb13-12"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-12"></a><span class="dv">9</span>  <span class="dv">2002-07-08</span>   <span class="dv">81</span>   <span class="fl">33.10000</span></span>
<span id="cb13-13"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-13"></a><span class="dv">10</span> <span class="dv">2002-07-18</span>   <span class="dv">82</span>   <span class="fl">38.85000</span></span>
<span id="cb13-14"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-14"></a><span class="dv">11</span> <span class="dv">2003-06-25</span>   <span class="dv">82</span>   <span class="fl">33.90000</span></span>
<span id="cb13-15"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-15"></a><span class="dv">12</span> <span class="dv">2003-07-04</span>   <span class="dv">84</span>   <span class="fl">32.90000</span></span>
<span id="cb13-16"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-16"></a><span class="dv">13</span> <span class="dv">2005-06-24</span>   <span class="dv">86</span>   <span class="fl">31.85714</span></span>
<span id="cb13-17"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-17"></a><span class="dv">14</span> <span class="dv">2005-06-27</span>   <span class="dv">82</span>   <span class="fl">51.53750</span></span>
<span id="cb13-18"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-18"></a><span class="dv">15</span> <span class="dv">2005-06-28</span>   <span class="dv">85</span>   <span class="fl">31.20000</span></span>
<span id="cb13-19"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-19"></a><span class="dv">16</span> <span class="dv">2005-07-17</span>   <span class="dv">84</span>   <span class="fl">32.70000</span></span>
<span id="cb13-20"><a href="managing-data-frames-with-the-dplyr-package.html#cb13-20"></a><span class="dv">17</span> <span class="dv">2005-08-03</span>   <span class="dv">84</span>   <span class="fl">37.90000</span></span></code></pre></div>
<p>Now there are only 17 observations where both of those conditions are met.</p>
</div>
<div id="arrange" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> <code>arrange()</code></h2>
<p>The <code>arrange()</code> function is used to reorder rows of a data frame according to one of the variables/columns. Reordering rows of a data frame (while preserving corresponding order
of other columns) is normally a pain to do in R. The <code>arrange()</code> function simplifies the process quite a bit.</p>
<p>Here we can order the rows of the data frame by date, so that the first row is the earliest (oldest) observation and the last row is the latest (most recent) observation.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb14-1"></a><span class="op">&gt;</span><span class="st"> </span>chicago &lt;-<span class="st"> </span><span class="kw">arrange</span>(chicago, date)</span></code></pre></div>
<p>We can now check the first few rows</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb15-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">select</span>(chicago, date, pm25tmean2), <span class="dv">3</span>)</span>
<span id="cb15-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb15-2"></a>        date pm25tmean2</span>
<span id="cb15-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb15-3"></a><span class="dv">1</span> <span class="dv">1987-01-01</span>         <span class="ot">NA</span></span>
<span id="cb15-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb15-4"></a><span class="dv">2</span> <span class="dv">1987-01-02</span>         <span class="ot">NA</span></span>
<span id="cb15-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb15-5"></a><span class="dv">3</span> <span class="dv">1987-01-03</span>         <span class="ot">NA</span></span></code></pre></div>
<p>and the last few rows.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb16-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(<span class="kw">select</span>(chicago, date, pm25tmean2), <span class="dv">3</span>)</span>
<span id="cb16-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb16-2"></a>           date pm25tmean2</span>
<span id="cb16-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb16-3"></a><span class="dv">6938</span> <span class="dv">2005-12-29</span>    <span class="fl">7.45000</span></span>
<span id="cb16-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb16-4"></a><span class="dv">6939</span> <span class="dv">2005-12-30</span>   <span class="fl">15.05714</span></span>
<span id="cb16-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb16-5"></a><span class="dv">6940</span> <span class="dv">2005-12-31</span>   <span class="fl">15.00000</span></span></code></pre></div>
<p>Columns can be arranged in descending order too by useing the special <code>desc()</code> operator.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb17-1"></a><span class="op">&gt;</span><span class="st"> </span>chicago &lt;-<span class="st"> </span><span class="kw">arrange</span>(chicago, <span class="kw">desc</span>(date))</span></code></pre></div>
<p>Looking at the first three and last three rows shows the dates in descending order.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">select</span>(chicago, date, pm25tmean2), <span class="dv">3</span>)</span>
<span id="cb18-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-2"></a>        date pm25tmean2</span>
<span id="cb18-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-3"></a><span class="dv">1</span> <span class="dv">2005-12-31</span>   <span class="fl">15.00000</span></span>
<span id="cb18-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-4"></a><span class="dv">2</span> <span class="dv">2005-12-30</span>   <span class="fl">15.05714</span></span>
<span id="cb18-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-5"></a><span class="dv">3</span> <span class="dv">2005-12-29</span>    <span class="fl">7.45000</span></span>
<span id="cb18-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-6"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(<span class="kw">select</span>(chicago, date, pm25tmean2), <span class="dv">3</span>)</span>
<span id="cb18-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-7"></a>           date pm25tmean2</span>
<span id="cb18-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-8"></a><span class="dv">6938</span> <span class="dv">1987-01-03</span>         <span class="ot">NA</span></span>
<span id="cb18-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-9"></a><span class="dv">6939</span> <span class="dv">1987-01-02</span>         <span class="ot">NA</span></span>
<span id="cb18-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb18-10"></a><span class="dv">6940</span> <span class="dv">1987-01-01</span>         <span class="ot">NA</span></span></code></pre></div>
</div>
<div id="rename" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> <code>rename()</code></h2>
<p>Renaming a variable in a data frame in R is surprisingly hard to do! The <code>rename()</code> function is designed to make this process easier.</p>
<p>Here you can see the names of the first five variables in the <code>chicago</code> data frame.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb19-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(chicago[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dv">3</span>)</span>
<span id="cb19-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb19-2"></a>  city tmpd dptp       date pm25tmean2</span>
<span id="cb19-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb19-3"></a><span class="dv">1</span> chic   <span class="dv">35</span> <span class="fl">30.1</span> <span class="dv">2005-12-31</span>   <span class="fl">15.00000</span></span>
<span id="cb19-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb19-4"></a><span class="dv">2</span> chic   <span class="dv">36</span> <span class="fl">31.0</span> <span class="dv">2005-12-30</span>   <span class="fl">15.05714</span></span>
<span id="cb19-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb19-5"></a><span class="dv">3</span> chic   <span class="dv">35</span> <span class="fl">29.4</span> <span class="dv">2005-12-29</span>    <span class="fl">7.45000</span></span></code></pre></div>
<p>The <code>dptp</code> column is supposed to represent the dew point temperature and the <code>pm25tmean2</code> column provides the PM2.5 data. However, these names are pretty obscure or awkward and probably be renamed to something more sensible.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb20-1"></a><span class="op">&gt;</span><span class="st"> </span>chicago &lt;-<span class="st"> </span><span class="kw">rename</span>(chicago, <span class="dt">dewpoint =</span> dptp, <span class="dt">pm25 =</span> pm25tmean2)</span>
<span id="cb20-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb20-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(chicago[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dv">3</span>)</span>
<span id="cb20-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb20-3"></a>  city tmpd dewpoint       date     pm25</span>
<span id="cb20-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb20-4"></a><span class="dv">1</span> chic   <span class="dv">35</span>     <span class="fl">30.1</span> <span class="dv">2005-12-31</span> <span class="fl">15.00000</span></span>
<span id="cb20-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb20-5"></a><span class="dv">2</span> chic   <span class="dv">36</span>     <span class="fl">31.0</span> <span class="dv">2005-12-30</span> <span class="fl">15.05714</span></span>
<span id="cb20-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb20-6"></a><span class="dv">3</span> chic   <span class="dv">35</span>     <span class="fl">29.4</span> <span class="dv">2005-12-29</span>  <span class="fl">7.45000</span></span></code></pre></div>
<p>The syntax inside the <code>rename()</code> function is to have the new name on the left-hand side of the <code>=</code> sign and the old name on the right-hand side.</p>
<p>I leave it as an exercise for the reader to figure how you do this in base R without <code>dplyr</code>.</p>
</div>
<div id="mutate" class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> <code>mutate()</code></h2>
<p>The <code>mutate()</code> function exists to compute transformations of variables in a data frame. Often, you want to create new variables that are derived from existing variables and <code>mutate()</code> provides a clean interface for doing that.</p>
<p>For example, with air pollution data, we often want to <em>detrend</em> the data by subtracting the mean from the data. That way we can look at whether a given day’s air pollution level is higher than or less than average (as opposed to looking at its absolute level).</p>
<p>Here we create a <code>pm25detrend</code> variable that subtracts the mean from the <code>pm25</code> variable.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-1"></a><span class="op">&gt;</span><span class="st"> </span>chicago &lt;-<span class="st"> </span><span class="kw">mutate</span>(chicago, <span class="dt">pm25detrend =</span> pm25 <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(pm25, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb21-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(chicago)</span>
<span id="cb21-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-3"></a>  city tmpd dewpoint       date     pm25 pm10tmean2  o3tmean2 no2tmean2</span>
<span id="cb21-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-4"></a><span class="dv">1</span> chic   <span class="dv">35</span>     <span class="fl">30.1</span> <span class="dv">2005-12-31</span> <span class="fl">15.00000</span>       <span class="fl">23.5</span>  <span class="fl">2.531250</span>  <span class="fl">13.25000</span></span>
<span id="cb21-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-5"></a><span class="dv">2</span> chic   <span class="dv">36</span>     <span class="fl">31.0</span> <span class="dv">2005-12-30</span> <span class="fl">15.05714</span>       <span class="fl">19.2</span>  <span class="fl">3.034420</span>  <span class="fl">22.80556</span></span>
<span id="cb21-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-6"></a><span class="dv">3</span> chic   <span class="dv">35</span>     <span class="fl">29.4</span> <span class="dv">2005-12-29</span>  <span class="fl">7.45000</span>       <span class="fl">23.5</span>  <span class="fl">6.794837</span>  <span class="fl">19.97222</span></span>
<span id="cb21-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-7"></a><span class="dv">4</span> chic   <span class="dv">37</span>     <span class="fl">34.5</span> <span class="dv">2005-12-28</span> <span class="fl">17.75000</span>       <span class="fl">27.5</span>  <span class="fl">3.260417</span>  <span class="fl">19.28563</span></span>
<span id="cb21-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-8"></a><span class="dv">5</span> chic   <span class="dv">40</span>     <span class="fl">33.6</span> <span class="dv">2005-12-27</span> <span class="fl">23.56000</span>       <span class="fl">27.0</span>  <span class="fl">4.468750</span>  <span class="fl">23.50000</span></span>
<span id="cb21-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-9"></a><span class="dv">6</span> chic   <span class="dv">35</span>     <span class="fl">29.6</span> <span class="dv">2005-12-26</span>  <span class="fl">8.40000</span>        <span class="fl">8.5</span> <span class="fl">14.041667</span>  <span class="fl">16.81944</span></span>
<span id="cb21-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-10"></a>  pm25detrend</span>
<span id="cb21-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-11"></a><span class="dv">1</span>   <span class="fl">-1.230958</span></span>
<span id="cb21-12"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-12"></a><span class="dv">2</span>   <span class="fl">-1.173815</span></span>
<span id="cb21-13"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-13"></a><span class="dv">3</span>   <span class="fl">-8.780958</span></span>
<span id="cb21-14"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-14"></a><span class="dv">4</span>    <span class="fl">1.519042</span></span>
<span id="cb21-15"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-15"></a><span class="dv">5</span>    <span class="fl">7.329042</span></span>
<span id="cb21-16"><a href="managing-data-frames-with-the-dplyr-package.html#cb21-16"></a><span class="dv">6</span>   <span class="fl">-7.830958</span></span></code></pre></div>
<p>There is also the related <code>transmute()</code> function, which does the same thing as <code>mutate()</code> but then <em>drops all non-transformed variables</em>.</p>
<p>Here we detrend the PM10 and ozone (O3) variables.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(<span class="kw">transmute</span>(chicago, </span>
<span id="cb22-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-2"></a><span class="op">+</span><span class="st">                </span><span class="dt">pm10detrend =</span> pm10tmean2 <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(pm10tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb22-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-3"></a><span class="op">+</span><span class="st">                </span><span class="dt">o3detrend =</span> o3tmean2 <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(o3tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)))</span>
<span id="cb22-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-4"></a>  pm10detrend  o3detrend</span>
<span id="cb22-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-5"></a><span class="dv">1</span>  <span class="fl">-10.395206</span> <span class="fl">-16.904263</span></span>
<span id="cb22-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-6"></a><span class="dv">2</span>  <span class="fl">-14.695206</span> <span class="fl">-16.401093</span></span>
<span id="cb22-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-7"></a><span class="dv">3</span>  <span class="fl">-10.395206</span> <span class="fl">-12.640676</span></span>
<span id="cb22-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-8"></a><span class="dv">4</span>   <span class="fl">-6.395206</span> <span class="fl">-16.175096</span></span>
<span id="cb22-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-9"></a><span class="dv">5</span>   <span class="fl">-6.895206</span> <span class="fl">-14.966763</span></span>
<span id="cb22-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb22-10"></a><span class="dv">6</span>  <span class="fl">-25.395206</span>  <span class="fl">-5.393846</span></span></code></pre></div>
<p>Note that there are only two columns in the transmuted data frame.</p>
</div>
<div id="group_by" class="section level2" number="3.10">
<h2><span class="header-section-number">3.10</span> <code>group_by()</code></h2>
<p>The <code>group_by()</code> function is used to generate summary statistics from the data frame within strata defined by a variable. For example, in this air pollution dataset, you might want to know what the average annual level of PM2.5 is. So the stratum is the year, and that is something we can derive from the <code>date</code> variable. In conjunction with the <code>group_by()</code> function we often use the <code>summarize()</code> function (or <code>summarise()</code> for some parts of the world).</p>
<p>The general operation here is a combination of splitting a data frame into separate pieces defined by a variable or group of variables (<code>group_by()</code>), and then applying a summary function across those subsets (<code>summarize()</code>).</p>
<p>First, we can create a <code>year</code> varible using <code>as.POSIXlt()</code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb23-1"></a><span class="op">&gt;</span><span class="st"> </span>chicago &lt;-<span class="st"> </span><span class="kw">mutate</span>(chicago, <span class="dt">year =</span> <span class="kw">as.POSIXlt</span>(date)<span class="op">$</span>year <span class="op">+</span><span class="st"> </span><span class="dv">1900</span>)</span></code></pre></div>
<p>Now we can create a separate data frame that splits the original data frame by year.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb24-1"></a><span class="op">&gt;</span><span class="st"> </span>years &lt;-<span class="st"> </span><span class="kw">group_by</span>(chicago, year)</span></code></pre></div>
<p>Finally, we compute summary statistics for each year in the data frame with the <code>summarize()</code> function.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarize</span>(years, <span class="dt">pm25 =</span> <span class="kw">mean</span>(pm25, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb25-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-2"></a><span class="op">+</span><span class="st">           </span><span class="dt">o3 =</span> <span class="kw">max</span>(o3tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb25-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-3"></a><span class="op">+</span><span class="st">           </span><span class="dt">no2 =</span> <span class="kw">median</span>(no2tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb25-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-4"></a><span class="co"># A tibble: 19 x 4</span></span>
<span id="cb25-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-5"></a>    year  pm25    o3   no2</span>
<span id="cb25-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-6"></a> <span class="op">*</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb25-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-7"></a><span class="st"> </span><span class="dv">1</span>  <span class="dv">1987</span> <span class="ot">NaN</span>    <span class="fl">63.0</span>  <span class="fl">23.5</span></span>
<span id="cb25-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-8"></a> <span class="dv">2</span>  <span class="dv">1988</span> <span class="ot">NaN</span>    <span class="fl">61.7</span>  <span class="fl">24.5</span></span>
<span id="cb25-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-9"></a> <span class="dv">3</span>  <span class="dv">1989</span> <span class="ot">NaN</span>    <span class="fl">59.7</span>  <span class="fl">26.1</span></span>
<span id="cb25-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-10"></a> <span class="dv">4</span>  <span class="dv">1990</span> <span class="ot">NaN</span>    <span class="fl">52.2</span>  <span class="fl">22.6</span></span>
<span id="cb25-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-11"></a> <span class="dv">5</span>  <span class="dv">1991</span> <span class="ot">NaN</span>    <span class="fl">63.1</span>  <span class="fl">21.4</span></span>
<span id="cb25-12"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-12"></a> <span class="dv">6</span>  <span class="dv">1992</span> <span class="ot">NaN</span>    <span class="fl">50.8</span>  <span class="fl">24.8</span></span>
<span id="cb25-13"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-13"></a> <span class="dv">7</span>  <span class="dv">1993</span> <span class="ot">NaN</span>    <span class="fl">44.3</span>  <span class="fl">25.8</span></span>
<span id="cb25-14"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-14"></a> <span class="dv">8</span>  <span class="dv">1994</span> <span class="ot">NaN</span>    <span class="fl">52.2</span>  <span class="fl">28.5</span></span>
<span id="cb25-15"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-15"></a> <span class="dv">9</span>  <span class="dv">1995</span> <span class="ot">NaN</span>    <span class="fl">66.6</span>  <span class="fl">27.3</span></span>
<span id="cb25-16"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-16"></a><span class="dv">10</span>  <span class="dv">1996</span> <span class="ot">NaN</span>    <span class="fl">58.4</span>  <span class="fl">26.4</span></span>
<span id="cb25-17"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-17"></a><span class="dv">11</span>  <span class="dv">1997</span> <span class="ot">NaN</span>    <span class="fl">56.5</span>  <span class="fl">25.5</span></span>
<span id="cb25-18"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-18"></a><span class="dv">12</span>  <span class="dv">1998</span>  <span class="fl">18.3</span>  <span class="fl">50.7</span>  <span class="fl">24.6</span></span>
<span id="cb25-19"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-19"></a><span class="dv">13</span>  <span class="dv">1999</span>  <span class="fl">18.5</span>  <span class="fl">57.5</span>  <span class="fl">24.7</span></span>
<span id="cb25-20"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-20"></a><span class="dv">14</span>  <span class="dv">2000</span>  <span class="fl">16.9</span>  <span class="fl">55.8</span>  <span class="fl">23.5</span></span>
<span id="cb25-21"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-21"></a><span class="dv">15</span>  <span class="dv">2001</span>  <span class="fl">16.9</span>  <span class="fl">51.8</span>  <span class="fl">25.1</span></span>
<span id="cb25-22"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-22"></a><span class="dv">16</span>  <span class="dv">2002</span>  <span class="fl">15.3</span>  <span class="fl">54.9</span>  <span class="fl">22.7</span></span>
<span id="cb25-23"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-23"></a><span class="dv">17</span>  <span class="dv">2003</span>  <span class="fl">15.2</span>  <span class="fl">56.2</span>  <span class="fl">24.6</span></span>
<span id="cb25-24"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-24"></a><span class="dv">18</span>  <span class="dv">2004</span>  <span class="fl">14.6</span>  <span class="fl">44.5</span>  <span class="fl">23.4</span></span>
<span id="cb25-25"><a href="managing-data-frames-with-the-dplyr-package.html#cb25-25"></a><span class="dv">19</span>  <span class="dv">2005</span>  <span class="fl">16.2</span>  <span class="fl">58.8</span>  <span class="fl">22.6</span></span></code></pre></div>
<p><code>summarize()</code> returns a data frame with <code>year</code> as the first column, and then the annual averages of <code>pm25</code>, <code>o3</code>, and <code>no2</code>.</p>
<p>In a slightly more complicated example, we might want to know what are the average levels of ozone (<code>o3</code>) and nitrogen dioxide (<code>no2</code>) within quintiles of <code>pm25</code>. A slicker way to do this would be through a regression model, but we can actually do this quickly with <code>group_by()</code> and <code>summarize()</code>.</p>
<p>First, we can create a categorical variable of <code>pm25</code> divided into quintiles.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb26-1"></a><span class="op">&gt;</span><span class="st"> </span>qq &lt;-<span class="st"> </span><span class="kw">quantile</span>(chicago<span class="op">$</span>pm25, <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb26-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb26-2"></a><span class="op">&gt;</span><span class="st"> </span>chicago &lt;-<span class="st"> </span><span class="kw">mutate</span>(chicago, <span class="dt">pm25.quint =</span> <span class="kw">cut</span>(pm25, qq))</span></code></pre></div>
<p>Now we can group the data frame by the <code>pm25.quint</code> variable.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb27-1"></a><span class="op">&gt;</span><span class="st"> </span>quint &lt;-<span class="st"> </span><span class="kw">group_by</span>(chicago, pm25.quint)</span></code></pre></div>
<p>Finally, we can compute the mean of <code>o3</code> and <code>no2</code> within quintiles of <code>pm25</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarize</span>(quint, <span class="dt">o3 =</span> <span class="kw">mean</span>(o3tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb28-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-2"></a><span class="op">+</span><span class="st">           </span><span class="dt">no2 =</span> <span class="kw">mean</span>(no2tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb28-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-3"></a><span class="co"># A tibble: 6 x 3</span></span>
<span id="cb28-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-4"></a>  pm25.quint     o3   no2</span>
<span id="cb28-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-5"></a><span class="op">*</span><span class="st"> </span><span class="er">&lt;</span>fct<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb28-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-6"></a><span class="dv">1</span> (<span class="fl">1.7</span>,<span class="fl">8.7</span>]    <span class="fl">21.7</span>  <span class="fl">18.0</span></span>
<span id="cb28-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-7"></a><span class="dv">2</span> (<span class="fl">8.7</span>,<span class="fl">12.4</span>]   <span class="fl">20.4</span>  <span class="fl">22.1</span></span>
<span id="cb28-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-8"></a><span class="dv">3</span> (<span class="fl">12.4</span>,<span class="fl">16.7</span>]  <span class="fl">20.7</span>  <span class="fl">24.4</span></span>
<span id="cb28-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-9"></a><span class="dv">4</span> (<span class="fl">16.7</span>,<span class="fl">22.6</span>]  <span class="fl">19.9</span>  <span class="fl">27.3</span></span>
<span id="cb28-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-10"></a><span class="dv">5</span> (<span class="fl">22.6</span>,<span class="fl">61.5</span>]  <span class="fl">20.3</span>  <span class="fl">29.6</span></span>
<span id="cb28-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb28-11"></a><span class="dv">6</span> <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">         </span><span class="fl">18.8</span>  <span class="fl">25.8</span></span></code></pre></div>
<p>From the table, it seems there isn’t a strong relationship between <code>pm25</code> and <code>o3</code>, but there appears to be a positive correlation between <code>pm25</code> and <code>no2</code>. More sophisticated statistical modeling can help to provide precise answers to these questions, but a simple application of <code>dplyr</code> functions can often get you most of the way there.</p>
</div>
<div id="section" class="section level2" number="3.11">
<h2><span class="header-section-number">3.11</span> <code>%&gt;%</code></h2>
<p>The pipeline operater <code>%&gt;%</code> is very handy for stringing together multiple <code>dplyr</code> functions in a sequence of operations. Notice above that every time we wanted to apply more than one function, the sequence gets buried in a sequence of nested function calls that is difficult to read, i.e.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb29-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">third</span>(<span class="kw">second</span>(<span class="kw">first</span>(x)))</span></code></pre></div>
<p>This nesting is not a natural way to think about a sequence of operations. The <code>%&gt;%</code> operator allows you to string operations in a left-to-right fashion, i.e.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb30-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">first</span>(x) <span class="op">%&gt;%</span><span class="st"> </span>second <span class="op">%&gt;%</span><span class="st"> </span>third</span></code></pre></div>
<p>Take the example that we just did in the last section where we computed the mean of <code>o3</code> and <code>no2</code> within quintiles of <code>pm25</code>. There we had to</p>
<ol style="list-style-type: decimal">
<li>create a new variable <code>pm25.quint</code></li>
<li>split the data frame by that new variable</li>
<li>compute the mean of <code>o3</code> and <code>no2</code> in the sub-groups defined by <code>pm25.quint</code></li>
</ol>
<p>That can be done with the following sequence in a single R expression.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mutate</span>(chicago, <span class="dt">pm25.quint =</span> <span class="kw">cut</span>(pm25, qq)) <span class="op">%&gt;%</span><span class="st">    </span></span>
<span id="cb31-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-2"></a><span class="op">+</span><span class="st">         </span><span class="kw">group_by</span>(pm25.quint) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb31-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-3"></a><span class="op">+</span><span class="st">         </span><span class="kw">summarize</span>(<span class="dt">o3 =</span> <span class="kw">mean</span>(o3tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb31-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-4"></a><span class="op">+</span><span class="st">                   </span><span class="dt">no2 =</span> <span class="kw">mean</span>(no2tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb31-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-5"></a><span class="co"># A tibble: 6 x 3</span></span>
<span id="cb31-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-6"></a>  pm25.quint     o3   no2</span>
<span id="cb31-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-7"></a><span class="op">*</span><span class="st"> </span><span class="er">&lt;</span>fct<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb31-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-8"></a><span class="dv">1</span> (<span class="fl">1.7</span>,<span class="fl">8.7</span>]    <span class="fl">21.7</span>  <span class="fl">18.0</span></span>
<span id="cb31-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-9"></a><span class="dv">2</span> (<span class="fl">8.7</span>,<span class="fl">12.4</span>]   <span class="fl">20.4</span>  <span class="fl">22.1</span></span>
<span id="cb31-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-10"></a><span class="dv">3</span> (<span class="fl">12.4</span>,<span class="fl">16.7</span>]  <span class="fl">20.7</span>  <span class="fl">24.4</span></span>
<span id="cb31-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-11"></a><span class="dv">4</span> (<span class="fl">16.7</span>,<span class="fl">22.6</span>]  <span class="fl">19.9</span>  <span class="fl">27.3</span></span>
<span id="cb31-12"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-12"></a><span class="dv">5</span> (<span class="fl">22.6</span>,<span class="fl">61.5</span>]  <span class="fl">20.3</span>  <span class="fl">29.6</span></span>
<span id="cb31-13"><a href="managing-data-frames-with-the-dplyr-package.html#cb31-13"></a><span class="dv">6</span> <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">         </span><span class="fl">18.8</span>  <span class="fl">25.8</span></span></code></pre></div>
<p>This way we don’t have to create a set of temporary variables along the way or create a massive nested sequence of function calls.</p>
<p>Notice in the above code that I pass the <code>chicago</code> data frame to the first call to <code>mutate()</code>, but then afterwards I do not have to pass the first argument to <code>group_by()</code> or <code>summarize()</code>. Once you travel down the pipeline with <code>%&gt;%</code>, the first argument is taken to be the output of the previous element in the pipeline.</p>
<p>Another example might be computing the average pollutant level by month. This could be useful to see if there are any seasonal trends in the data.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mutate</span>(chicago, <span class="dt">month =</span> <span class="kw">as.POSIXlt</span>(date)<span class="op">$</span>mon <span class="op">+</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-2"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-2"></a><span class="op">+</span><span class="st">         </span><span class="kw">group_by</span>(month) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-3"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-3"></a><span class="op">+</span><span class="st">         </span><span class="kw">summarize</span>(<span class="dt">pm25 =</span> <span class="kw">mean</span>(pm25, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb32-4"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-4"></a><span class="op">+</span><span class="st">                   </span><span class="dt">o3 =</span> <span class="kw">max</span>(o3tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb32-5"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-5"></a><span class="op">+</span><span class="st">                   </span><span class="dt">no2 =</span> <span class="kw">median</span>(no2tmean2, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb32-6"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-6"></a><span class="co"># A tibble: 12 x 4</span></span>
<span id="cb32-7"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-7"></a>   month  pm25    o3   no2</span>
<span id="cb32-8"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-8"></a> <span class="op">*</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb32-9"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-9"></a><span class="st"> </span><span class="dv">1</span>     <span class="dv">1</span>  <span class="fl">17.8</span>  <span class="fl">28.2</span>  <span class="fl">25.4</span></span>
<span id="cb32-10"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-10"></a> <span class="dv">2</span>     <span class="dv">2</span>  <span class="fl">20.4</span>  <span class="fl">37.4</span>  <span class="fl">26.8</span></span>
<span id="cb32-11"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-11"></a> <span class="dv">3</span>     <span class="dv">3</span>  <span class="fl">17.4</span>  <span class="fl">39.0</span>  <span class="fl">26.8</span></span>
<span id="cb32-12"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-12"></a> <span class="dv">4</span>     <span class="dv">4</span>  <span class="fl">13.9</span>  <span class="fl">47.9</span>  <span class="fl">25.0</span></span>
<span id="cb32-13"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-13"></a> <span class="dv">5</span>     <span class="dv">5</span>  <span class="fl">14.1</span>  <span class="fl">52.8</span>  <span class="fl">24.2</span></span>
<span id="cb32-14"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-14"></a> <span class="dv">6</span>     <span class="dv">6</span>  <span class="fl">15.9</span>  <span class="fl">66.6</span>  <span class="fl">25.0</span></span>
<span id="cb32-15"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-15"></a> <span class="dv">7</span>     <span class="dv">7</span>  <span class="fl">16.6</span>  <span class="fl">59.5</span>  <span class="fl">22.4</span></span>
<span id="cb32-16"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-16"></a> <span class="dv">8</span>     <span class="dv">8</span>  <span class="fl">16.9</span>  <span class="fl">54.0</span>  <span class="fl">23.0</span></span>
<span id="cb32-17"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-17"></a> <span class="dv">9</span>     <span class="dv">9</span>  <span class="fl">15.9</span>  <span class="fl">57.5</span>  <span class="fl">24.5</span></span>
<span id="cb32-18"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-18"></a><span class="dv">10</span>    <span class="dv">10</span>  <span class="fl">14.2</span>  <span class="fl">47.1</span>  <span class="fl">24.2</span></span>
<span id="cb32-19"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-19"></a><span class="dv">11</span>    <span class="dv">11</span>  <span class="fl">15.2</span>  <span class="fl">29.5</span>  <span class="fl">23.6</span></span>
<span id="cb32-20"><a href="managing-data-frames-with-the-dplyr-package.html#cb32-20"></a><span class="dv">12</span>    <span class="dv">12</span>  <span class="fl">17.5</span>  <span class="fl">27.7</span>  <span class="fl">24.5</span></span></code></pre></div>
<p>Here we can see that <code>o3</code> tends to be low in the winter months and high in the summer while <code>no2</code> is higher in the winter and lower in the summer.</p>
</div>
<div id="summary" class="section level2" number="3.12">
<h2><span class="header-section-number">3.12</span> Summary</h2>
<p>The <code>dplyr</code> package provides a concise set of operations for managing data frames. With these functions we can do a number of complex operations in just a few lines of code. In particular, we can often conduct the beginnings of an exploratory analysis with the powerful combination of <code>group_by()</code> and <code>summarize()</code>.</p>
<p>Once you learn the <code>dplyr</code> grammar there are a few additional benefits</p>
<ul>
<li><p><code>dplyr</code> can work with other data frame “backends” such as SQL databases. There is an SQL interface for relational databases via the DBI package</p></li>
<li><p><code>dplyr</code> can be integrated with the <code>data.table</code> package for large fast tables</p></li>
</ul>
<p>The <code>dplyr</code> package is handy way to both simplify and speed up your data frame management code. It’s rare that you get such a combination at the same time!</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started-with-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis-checklist.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rdpeng/exdata/edit/bookdown/dplyr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
